# BabySleep

## GitFlow

### 1. Локально создаём отдельную ветку в гите
Ветки разбиваются по виртуальным папкам.

Если ветка добавляет новый функционал, то помещаем её в папку `feature`. Если это исправление бага, то в ветку `fix`.
Название самой ветки должно говорить о том, что в ней реализовано.

Например, если мы добавляем функционал напоминаний о том, что пора укладывать ребёнка, то ветка должна называться примерно так:
`feature/sleep_notification`. С багами аналогично, например: `fix/sleep_notification_bugfix`.

### 2. Работаем локально в созданной ветке

Коммиты должны быть небольшими и атомарными, т.е. затрагивать какую-то одну задачу. В комментарии обязательно должно быть написано, что было сделано в данном коммите. Коммиты можно сразу push-ить в удалённый репозиторий, в ветку с тем же названием или после завершения работы запушить сразу всё.

### 3. Создаём Merge Request
1. Перед выгрузкой готовой работы обязательно сделать `pull` текущей версии ветки **master**. Решить возможные конфликты.
2. Затем проверить ещё раз что всё работает, приложение запускается, нет ошибок и уведомлений.
3. После этого результат выгружается в этот репозиторий и создаётся Merge Request. Нужно не забыть при этом указать удалить ветку после мерджа.
4. Если работа закончена не до конца, но вы хотите показать результат и получить комментарии, перед названием Merge Request делается пометка `WIP: (Work in Progress)`. В этом случае его не будут мерджить.
5. Если в ходе Code Review появляются замечания, решаем, исправляем до тех пор, пока не появляется отметка "принято" от трёх участников.
6. После этого майнтейнер вливает код в master-ветку, работа считается законченой.

### 3. Ревью чужого кода
Если в репозитории висят открытые Merge Request-ы, вы можете отревьюить этот код. Делать это не обязательно, но **крайне желательно**. Таким образом вы будете всегда в курсе того, что происходит в проекте. Также, таким образом формируется общий стиль команды.

В процессе ревью, если возникают вопросы, в редакторе можно выделить интересующий фрагмент кода и задать вопрос автору реквеста. Merge Request сливается с **master** только после решения всех вопросов по ревью. 

Если вопросов нет и вы согласны слить этот код в **master**, можете просто отметить реквест одобрительным смайликом. :) 

### 4. Логирование и обработка ошибок
Если вы обрабатываете исключение (например, развертываете опционал), которое в ряде случаев может привести к ошибке, необходимо использовать метод reportError, например: 
do {
    try self.doWork();
} catch let exception as NSException {
    ExceptionHandlingHelper.reportError("doWork failed", exception: exception)
}
Параметр с исключением является опциональным.

В случаях, когда вам нужно просто отследить какое-нибудь событие, используйте метод logEvent(event: String, title: String, content: String). В качестве события можно передавать одну из констант FirebaseAnalytics (Например, AnalyticsEventAppOpen и тп. Подробнее: https://firebase.google.com/docs/reference/swift/firebaseanalytics/api/reference/Constants). 
